webpackJsonp([12],{VPyT:function(e,t){},YJNj:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("woOf"),a=n.n(o),i=n("pOoK"),s={keyword:null,pageNum:1,pageSize:5,queryType:null,total:null},r={name:"home",data:function(){return{formShow:!1,form:{},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:10,message:"长度在 3 到 10 个字符",trigger:"blur"}],nickName:[{required:!0,message:"请输入用户昵称",trigger:"blur"},{min:3,max:10,message:"长度在 3 到 10 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:12,message:"长度在 6 到 12 个字符",trigger:"blur"}]},listQuery:a()({},s),total:0,options:[{value:1,label:"测试1"},{value:2,label:"测试2"}],list:[{id:1,name:"测试1",age:"1",edit:!1}],multipleSelection:[],operateType:null,operates:[{label:"测试功能1",value:"up"},{label:"测试功能2",value:"down"}]}},beforeCreate:function(){},created:function(){this.getlist()},methods:{editOpen:function(e){var t=this;Object(i.d)({action:"upopen",uid:e.uid,upopen:e.up_open}).then(function(e){"ok"==e.data?t.$message({message:"操作成功",type:"success"}):t.$message.error(e.msg)})},getlist:function(){var e=this;Object(i.c)(this.listQuery).then(function(t){e.list=t.data.list,e.total=t.data.total})},reset:function(){this.listQuery=a()({},s)},isedit:function(){return!1},queryList:function(){this.getlist()},del:function(e){var t=this;this.$confirm("是否要进行该操作? 删除不可恢复!下级额度,代理链一并删除","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(i.b)({uid:e.uid}).then(function(e){t.getlist()})})},copySecret:function(e,t){var n=document.createElement("input");n.value=e,document.body.appendChild(n),n.select();document.execCommand("copy"),this.$message({type:"success",message:["复制 代理uid 成功"][t]}),document.body.removeChild(n)},edit:function(e,t){var n=this;switch(t){case"topup":this.$prompt("请输入充值额度,当前最大可充:"+("admin"!=this.$store.getters.roles?(Math.floor(this.$store.getters.quota/100*100)/100).toFixed(2):"9999999999"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^[0-9]*$/,inputErrorMessage:"充值必须整数,且不超过"+(Math.floor(this.$store.getters.quota/100*100)/100).toFixed(2)}).then(function(o){var a=o.value;(Math.floor(100*a)>n.$store.getters.quota||a<0)&&"admin"!=n.$store.getters.roles?n.$message({type:"error",message:"余额不足,且不超过"+(Math.floor(n.$store.getters.quota/100*100)/100).toFixed(2)}):(n.$message({type:"success",message:"你充值金额是: "+a}),Object(i.d)({action:t,uid:e.uid,quota:Math.floor(100*a)}).then(function(e){"admin"!=n.$store.getters.roles&&n.$store.dispatch("UpQuota",n.$store.getters.quota-Math.floor(100*a)),n.getlist()}))}).catch(function(){n.$message({type:"info",message:"取消输入"})});break;case"resetpwd":this.$confirm("是否要进行该操作? ","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(i.d)({action:t,uid:e.uid}).then(function(e){n.$message({type:"success",message:"重置成功"}),n.getlist()})})}},handleSave:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("错误提交请检查数据!!"),!1;t.form.rate=t.$store.getters.rate,Object(i.a)(t.form).then(function(e){t.getlist(),t.formShow=!1,t.form={}})})},formBeforClose:function(e){var t=this;this.$confirm("确认关闭？").then(function(n){t.form={},e()}).catch(function(e){})},formClose:function(e){this.form={},e()},editSwitch:function(e){Number(!Boolean(e.is_show))},handleSelectionChange:function(e){this.multipleSelection=e},handleBatchOperate:function(){var e=this;null!=this.operateType?null==this.multipleSelection||this.multipleSelection.length<1?this.$message({message:"请选择要操作的商品",type:"warning",duration:1e3}):this.$confirm("是否要进行该批量操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){for(var t=[],n=0;n<e.multipleSelection.length;n++)t.push(e.multipleSelection[n].id);switch(e.operateType){case e.operates[0].value:console.log("批量处理",t)}e.getlist()}):this.$message({message:"请选择操作类型",type:"warning",duration:1e3})},handleSizeChange:function(e){this.listQuery.pageNum=1,this.listQuery.pageSize=e,this.getlist()},handleCurrentChange:function(e){this.listQuery.pageNum=e,this.getlist()}}},l={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-card",{staticClass:"filter-container",attrs:{shadow:"never"}},[n("div",[n("i",{staticClass:"el-icon-search"}),e._v(" "),n("span",[e._v("筛选搜索")]),e._v(" "),n("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small"},on:{click:function(t){e.queryList()}}},[e._v("\n        查询结果\n      ")]),e._v(" "),n("el-button",{staticStyle:{float:"right","margin-right":"15px"},attrs:{size:"small"},on:{click:function(t){e.reset()}}},[e._v("\n        重置\n      ")])],1),e._v(" "),n("div",{staticStyle:{"margin-top":"15px"}},[n("el-form",{attrs:{inline:!0,model:e.listQuery,size:"small","label-width":"140px"}},[n("el-form-item",{attrs:{label:"输入搜索："}},[n("el-input",{staticStyle:{width:"203px"},attrs:{placeholder:"昵称,用户名"},on:{change:e.getlist},model:{value:e.listQuery.keyword,callback:function(t){e.$set(e.listQuery,"keyword",t)},expression:"listQuery.keyword"}})],1)],1)],1)]),e._v(" "),n("el-card",{staticClass:"operate-container",attrs:{shadow:"never"}},[n("i",{staticClass:"el-icon-tickets"}),e._v(" "),n("span",[e._v("数据列表")]),e._v(" "),n("el-button",{staticClass:"btn-add",attrs:{type:"primary",size:"mini"},on:{click:function(t){e.formShow=!0}}},[e._v("\n      添加\n    ")])],1),e._v(" "),n("div",{staticClass:"pagination-container"},[n("el-pagination",{attrs:{background:"",layout:"total, sizes,prev, pager, next,jumper","page-size":e.listQuery.pageSize,"page-sizes":[5,10,15],"current-page":e.listQuery.pageNum,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.listQuery,"pageNum",t)}}})],1),e._v(" "),n("div",{staticClass:"table-container"},[n("el-table",{ref:"list",staticStyle:{width:"100%"},attrs:{data:e.list,border:"",stripe:"","default-sort":{prop:"createdate"}},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",align:"center",width:"40"}}),e._v(" "),n("el-table-column",{attrs:{type:"index",align:"center",width:"40",label:"#"}}),e._v(" "),"admin"==e.$store.getters.roles?n("el-table-column",{attrs:{label:"uid","min-width":"8%"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{on:{click:function(n){e.copySecret(t.row.uid,0)}}},[e._v(e._s(t.row.uid))])]}}])}):e._e(),e._v(" "),n("el-table-column",{attrs:{label:"用户名","min-width":"8%"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.username))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"用户昵称","min-width":"8%"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.nickName))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"余额","min-width":"8%"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s((Math.floor(t.row.quota/100*100)/100).toFixed(2)))])]}}])}),e._v(" "),"admin"==e.$store.getters.roles?n("el-table-column",{attrs:{label:"级别","min-width":"8%"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.lv))])]}}])}):e._e(),e._v(" "),n("el-table-column",{attrs:{label:"接单状态","min-width":"8%"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":0},nativeOn:{click:function(n){e.editOpen(t.row)}},model:{value:t.row.up_open,callback:function(n){e.$set(t.row,"up_open",n)},expression:"scope.row.up_open"}})]}}])}),e._v(" "),n("el-table-column",{staticClass:"operation",attrs:{label:"操作",fixed:"right",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticClass:"btnbodyhang"},[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){e.edit(t.row,"topup")}}},[e._v("充值")]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){e.edit(t.row,"resetpwd")}}},[e._v("重置密码")])],1),e._v(" "),n("div",{staticClass:"btnbodyhang"},[n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(n){e.del(t.row)}}},[e._v("删除")])],1)]}}])})],1)],1),e._v(" "),n("el-dialog",{attrs:{title:"新建下级代理",visible:e.formShow,"before-close":e.formBeforClose,close:e.formClose,width:"40%"},on:{"update:visible":function(t){e.formShow=t}}},[n("el-form",{ref:"selfForm",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"用户名",prop:"username"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"用户昵称",prop:"nickName"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.nickName,callback:function(t){e.$set(e.form,"nickName",t)},expression:"form.nickName"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"用户密码",prop:"password"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.formShow=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleSave("selfForm")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var u=n("VU/8")(r,l,!1,function(e){n("VPyT")},null,null);t.default=u.exports},pOoK:function(e,t,n){"use strict";t.c=function(e){return Object(o.a)({url:"/admin/proxyuserlist",method:"get",params:e})},t.a=function(e){return Object(o.a)({url:"/admin/proxyusercreate",method:"post",data:e})},t.b=function(e){return Object(o.a)({url:"/admin/proxyuserdelete",method:"post",data:e})},t.d=function(e){return Object(o.a)({url:"/admin/proxyuserupdate",method:"post",data:e})};var o=n("vLgD")}});