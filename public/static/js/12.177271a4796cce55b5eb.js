webpackJsonp([12],{YJNj:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("woOf"),i=n.n(a),s=n("pOoK"),r={keyword:null,pageNum:1,pageSize:5,queryType:null,total:null},o={name:"home",data:function(){return{formShow:!1,form:{},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:10,message:"长度在 3 到 10 个字符",trigger:"blur"}],nickName:[{required:!0,message:"请输入用户昵称",trigger:"blur"},{min:3,max:10,message:"长度在 3 到 10 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:12,message:"长度在 6 到 12 个字符",trigger:"blur"}]},listQuery:i()({},r),total:0,options:[{value:1,label:"测试1"},{value:2,label:"测试2"}],list:[{id:1,name:"测试1",age:"1",edit:!1}],multipleSelection:[],operateType:null,operates:[{label:"测试功能1",value:"up"},{label:"测试功能2",value:"down"}]}},beforeCreate:function(){},created:function(){this.getlist()},methods:{getlist:function(){var t=this;Object(s.c)(this.listQuery).then(function(e){t.list=e.data.list,t.total=e.data.total})},reset:function(){this.listQuery=i()({},r)},isedit:function(){return!1},queryList:function(){this.getlist()},del:function(t){var e=this;this.$confirm("是否要进行该操作? 删除不可恢复!下级额度,代理链一并删除","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(s.b)({uid:t.uid}).then(function(t){e.getlist()})})},edit:function(t,e){var n=this;switch(e){case"topup":this.$prompt("请输入充值额度,当前最大可充:"+(this.$store.getters.quota-1e4<0?"0元":this.$store.getters.quota-1e4+"元"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^[0-9]*$/,inputErrorMessage:"每日限额必须整数,且不超过"+(this.$store.getters.quota-1e4<0?"0元":this.$store.getters.quota-1e4+"元")}).then(function(a){var i=a.value;(i>n.$store.getters.quota-1e4||i<0)&&"admin"!=n.$store.getters.roles?n.$message({type:"error",message:"必须整数,且不超过"+(n.$store.getters.quota-1e4<0?"0元":n.$store.getters.quota-1e4+"元")}):(n.$message({type:"success",message:"你充值金额是: "+i}),Object(s.d)({action:e,uid:t.uid,quota:i}).then(function(t){"admin"!=n.$store.getters.roles&&n.$store.dispatch("UpQuota",n.$store.getters.quota-i),n.getlist()}))}).catch(function(){n.$message({type:"info",message:"取消输入"})});break;case"resetpwd":this.$confirm("是否要进行该操作? ","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(s.d)({action:e,uid:t.uid}).then(function(t){n.$message({type:"success",message:"重置成功"}),n.getlist()})})}},handleSave:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("错误提交请检查数据!!"),!1;e.form.rate=e.$store.getters.rate,Object(s.a)(e.form).then(function(t){e.getlist(),e.formShow=!1,e.form={}})})},formBeforClose:function(t){var e=this;this.$confirm("确认关闭？").then(function(n){e.form={},t()}).catch(function(t){})},formClose:function(t){this.form={},t()},editSwitch:function(t){Number(!Boolean(t.is_show))},handleSelectionChange:function(t){this.multipleSelection=t},handleBatchOperate:function(){var t=this;null!=this.operateType?null==this.multipleSelection||this.multipleSelection.length<1?this.$message({message:"请选择要操作的商品",type:"warning",duration:1e3}):this.$confirm("是否要进行该批量操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){for(var e=[],n=0;n<t.multipleSelection.length;n++)e.push(t.multipleSelection[n].id);switch(t.operateType){case t.operates[0].value:console.log("批量处理",e)}t.getlist()}):this.$message({message:"请选择操作类型",type:"warning",duration:1e3})},handleSizeChange:function(t){this.listQuery.pageNum=1,this.listQuery.pageSize=t,this.getlist()},handleCurrentChange:function(t){this.listQuery.pageNum=t,this.getlist()}}},l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-card",{staticClass:"filter-container",attrs:{shadow:"never"}},[n("div",[n("i",{staticClass:"el-icon-search"}),t._v(" "),n("span",[t._v("筛选搜索")]),t._v(" "),n("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small"},on:{click:function(e){t.queryList()}}},[t._v("\n        查询结果\n      ")]),t._v(" "),n("el-button",{staticStyle:{float:"right","margin-right":"15px"},attrs:{size:"small"},on:{click:function(e){t.reset()}}},[t._v("\n        重置\n      ")])],1),t._v(" "),n("div",{staticStyle:{"margin-top":"15px"}},[n("el-form",{attrs:{inline:!0,model:t.listQuery,size:"small","label-width":"140px"}},[n("el-form-item",{attrs:{label:"输入搜索："}},[n("el-input",{staticStyle:{width:"203px"},attrs:{placeholder:"昵称,用户名"},on:{change:t.getlist},model:{value:t.listQuery.keyword,callback:function(e){t.$set(t.listQuery,"keyword",e)},expression:"listQuery.keyword"}})],1)],1)],1)]),t._v(" "),n("el-card",{staticClass:"operate-container",attrs:{shadow:"never"}},[n("i",{staticClass:"el-icon-tickets"}),t._v(" "),n("span",[t._v("数据列表")]),t._v(" "),n("el-button",{staticClass:"btn-add",attrs:{type:"primary",size:"mini"},on:{click:function(e){t.formShow=!0}}},[t._v("\n      添加\n    ")])],1),t._v(" "),n("div",{staticClass:"pagination-container"},[n("el-pagination",{attrs:{background:"",layout:"total, sizes,prev, pager, next,jumper","page-size":t.listQuery.pageSize,"page-sizes":[5,10,15],"current-page":t.listQuery.pageNum,total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.$set(t.listQuery,"pageNum",e)}}})],1),t._v(" "),n("div",{staticClass:"table-container"},[n("el-table",{ref:"list",staticStyle:{width:"100%"},attrs:{data:t.list,border:"",stripe:"","default-sort":{prop:"createdate"}},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",align:"center",width:"40"}}),t._v(" "),n("el-table-column",{attrs:{type:"index",align:"center",width:"40",label:"#"}}),t._v(" "),n("el-table-column",{attrs:{label:"用户名","min-width":"8%"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.username))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"用户昵称","min-width":"8%"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.nickName))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"余额","min-width":"8%"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.quota))])]}}])}),t._v(" "),"admin"==t.$store.getters.roles?n("el-table-column",{attrs:{label:"级别","min-width":"8%"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.lv))])]}}])}):t._e(),t._v(" "),n("el-table-column",{staticClass:"operation",attrs:{label:"操作",fixed:"right",align:"center",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"btnbodyhang"},[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){t.edit(e.row,"topup")}}},[t._v("充值")]),t._v(" "),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){t.edit(e.row,"resetpwd")}}},[t._v("重置密码")])],1),t._v(" "),n("div",{staticClass:"btnbodyhang"},[n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(n){t.del(e.row)}}},[t._v("删除")])],1)]}}])})],1)],1),t._v(" "),n("el-dialog",{attrs:{title:"新建下级代理",visible:t.formShow,"before-close":t.formBeforClose,close:t.formClose,width:"40%"},on:{"update:visible":function(e){t.formShow=e}}},[n("el-form",{ref:"selfForm",attrs:{model:t.form,rules:t.rules,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"用户名",prop:"username"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"用户昵称",prop:"nickName"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.nickName,callback:function(e){t.$set(t.form,"nickName",e)},expression:"form.nickName"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"用户密码",prop:"password"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.formShow=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.handleSave("selfForm")}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var u=n("VU/8")(o,l,!1,function(t){n("ucXr")},null,null);e.default=u.exports},pOoK:function(t,e,n){"use strict";e.c=function(t){return Object(a.a)({url:"/admin/proxyuserlist",method:"get",params:t})},e.a=function(t){return Object(a.a)({url:"/admin/proxyusercreate",method:"post",data:t})},e.b=function(t){return Object(a.a)({url:"/admin/proxyuserdelete",method:"post",data:t})},e.d=function(t){return Object(a.a)({url:"/admin/proxyuserupdate",method:"post",data:t})};var a=n("vLgD")},ucXr:function(t,e){}});